import{_ as W}from"./CI3ptiHb.js";import{_ as Q}from"./BYghCgPf.js";import{_ as X}from"./DOrbmtzd.js";import{m as E,k as j,R as J,_ as K,l as Y,Q as G,n as Z,q,s as $,o as d,c as g,C as S,L as V,A as w,D as C,M as T,N as R,r as O,H as x,S as ee,g as te,h as p,a as s,t as P,b,w as L,O as F,d as oe,j as se,P as ae}from"./BeLnNiZH.js";import{_ as ne}from"./4jwk4YuS.js";import{H as le}from"./Dog2zgWk.js";import"./CGl11utC.js";import"./C6CwPg7k.js";const ie={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},y=E(j.ui.strategy,j.ui.pagination,ie),ue=E(j.ui.strategy,j.ui.button,J),re=Y({components:{UButton:G},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>y.default.size,validator(e){return Object.keys(ue.size).includes(e)}},to:{type:Function,default:null},activeButton:{type:Object,default:()=>y.default.activeButton},inactiveButton:{type:Object,default:()=>y.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>y.default.firstButton},lastButton:{type:Object,default:()=>y.default.lastButton},prevButton:{type:Object,default:()=>y.default.prevButton},nextButton:{type:Object,default:()=>y.default.nextButton},divider:{type:String,default:"â€¦"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:z}){const{ui:f,attrs:v}=Z("pagination",q(e,"ui"),y,q(e,"class")),a=$({get(){return e.modelValue},set(i){z("update:modelValue",i)}}),c=$(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(i,m)=>m+1)),r=$(()=>{const i=c.value.length,m=a.value,U=Math.max(e.max,5),t=Math.floor((Math.min(U,i)-5)/2),M=m-t,D=m+t,H=M-1>1,I=D+1<i,o=[];if(i<=U){for(let h=1;h<=i;h++)o.push(h);return o}if(o.push(1),H&&o.push(e.divider),!I){const h=m+t+2-i;for(let B=m-t-h;B<=m-t-1;B++)o.push(B)}for(let h=Math.max(2,M);h<=Math.min(i,D);h++)o.push(h);if(!H){const h=1-(m-t-2);for(let B=m+t+1;B<=m+t+h;B++)o.push(B)}return I&&o.push(e.divider),D<i&&o.push(i),o.length>=3&&o[1]===e.divider&&o[2]===3&&(o[1]=2),o.length>=3&&o[o.length-2]===e.divider&&o[o.length-1]===o.length&&(o[o.length-2]=o.length-1),o}),n=$(()=>a.value>1),k=$(()=>a.value<c.value.length);function l(){n.value&&(a.value=1)}function u(){k.value&&(a.value=c.value.length)}function _(i){typeof i!="string"&&(a.value=i)}function N(){n.value&&a.value--}function A(){k.value&&a.value++}return{ui:f,attrs:v,currentPage:a,pages:c,displayedPages:r,canGoLastOrNext:k,canGoFirstOrPrev:n,onClickPrev:N,onClickNext:A,onClickPage:_,onClickFirst:l,onClickLast:u}}});function de(e,z,f,v,a,c){const r=G;return d(),g("div",w({class:e.ui.wrapper},e.attrs),[S(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(d(),V(r,w({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):C("",!0)]),S(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(d(),V(r,w({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):C("",!0)]),(d(!0),g(T,null,R(e.displayedPages,(n,k)=>{var l;return d(),V(r,w({key:`${n}-${k}`,to:typeof n=="number"?(l=e.to)==null?void 0:l.call(e,n):null,size:e.size,disabled:e.disabled,label:`${n}`,ref_for:!0},n===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof n=="string","z-[1]":n===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(n)}),null,16,["to","size","disabled","label","class","onClick"])}),128)),S(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(d(),V(r,w({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):C("",!0)]),S(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(d(),V(r,w({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):C("",!0)])],16)}const ce=K(re,[["render",de]]),pe={key:0},fe={class:"text-2xl font-semibold my-4"},me={class:"flex justify-between mb-3"},he={class:"flex gap-4"},ve={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},be={class:"w-full text-sm text-left text-gray-500"},ye=s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"}," Name "),s("th",{scope:"col",class:"px-6 py-3"}," Phone "),s("th",{scope:"col",class:"px-6 py-3"}," Institute "),s("th",{scope:"col",class:"px-6 py-3"}," Batch "),s("th",{scope:"col",class:"px-6 py-3"}," Address "),s("th",null," Action ")])],-1),ge={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},ke={class:"px-6 py-4"},Be={class:"px-6 py-4"},Ce={class:"px-6 py-4"},_e={class:"px-6 py-4"},we={key:0},Pe={class:"mt-5"},Ve={key:1},Fe={__name:"students",setup(e){const{$axios:z}=se(),f=O(null),v=O(1),a=O(""),c=O(""),r=O(50),n=async()=>{try{const l={};a.value&&(l.search=a.value),r.value&&(l.limit=r.value),v.value&&(l.page=v.value),c.value&&c.value!=="All"&&(l.batch=c.value);const{data:u}=await z.get("/auth/users",{params:l});f.value=u.users}catch(l){console.log(l.message)}};x([c,r,v],()=>{n()}),ee(a,()=>{n()},1e3);const k=async l=>{let u=prompt("Enter password");if(u)try{const{data:_}=await z.post("/auth/admin/signup",{user:l,password:u});ae().add({title:"Admin created successfully"})}catch(_){console.log(_.message)}};return te(()=>{n()}),(l,u)=>{const _=W,N=Q,A=X,i=G,m=ce,U=ne;return p(f)?(d(),g("div",pe,[s("h1",fe," Users - Total "+P(p(f).totalDocs)+" Students ",1),s("div",me,[b(N,{label:"Search"},{default:L(()=>[b(_,{modelValue:p(a),"onUpdate:modelValue":u[0]||(u[0]=t=>F(a)?a.value=t:null),placeholder:"Search"},null,8,["modelValue"])]),_:1}),s("div",he,[b(N,{label:"Per Page"},{default:L(()=>[b(A,{options:[10,50,100,500,p(f).totalDocs],modelValue:p(r),"onUpdate:modelValue":u[1]||(u[1]=t=>F(r)?r.value=t:null),placeholder:"Per page"},null,8,["options","modelValue"])]),_:1}),b(N,{label:"Batch"},{default:L(()=>[b(A,{options:["All",...p(le)],modelValue:p(c),"onUpdate:modelValue":u[2]||(u[2]=t=>F(c)?c.value=t:null),placeholder:"HSC Batch"},null,8,["options","modelValue"])]),_:1})])]),p(f)&&p(f).docs?(d(),g("div",ve,[s("table",be,[ye,s("tbody",null,[(d(!0),g(T,null,R(p(f).docs,t=>(d(),g("tr",{key:t._id,class:"border-b"},[s("th",ge,P(t.name),1),s("td",ke,P(t.phone),1),s("td",Be,P(t.institute),1),s("td",Ce,P(t.batch),1),s("td",_e,[t.address||t.district||t.division?(d(),g("div",we,P(`${t.address} ${t.district} ${t.division}`),1)):C("",!0)]),s("td",null,[l.$userStore.role=="superadmin"?(d(),V(i,{key:0,onClick:M=>k(t._id)},{default:L(()=>[oe(" Make Admin ")]),_:2},1032,["onClick"])):C("",!0)])]))),128))])])])):C("",!0),s("div",Pe,[b(m,{class:"mx-auto",modelValue:p(v),"onUpdate:modelValue":u[3]||(u[3]=t=>F(v)?v.value=t:null),"page-count":p(f).limit,total:p(f).totalDocs},null,8,["modelValue","page-count","total"])])])):(d(),g("div",Ve,[b(U)]))}}};export{Fe as default};

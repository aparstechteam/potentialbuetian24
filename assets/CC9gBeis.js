import{_ as W}from"./CPynHj0F.js";import{_ as J}from"./BdAcDX1V.js";import{_ as Q}from"./CRfFT5Ak.js";import{m as I,g as F,R as X,_ as R,h as Y,P as G,i as Z,j as E,k as N,o as r,c as y,x as A,J as z,r as P,y as C,K as q,L as K,S as x,b,D as L,E as ee,T as te,B as oe,H as f,a as s,t as V,w as S,M as j,d as se,Q as ne,N as ae}from"./C8upzGh-.js";import{H as le}from"./Dog2zgWk.js";import"./CxWF_CYT.js";import"./2EGQ9ZuQ.js";const ie={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},g=I(F.ui.strategy,F.ui.pagination,ie),ue=I(F.ui.strategy,F.ui.button,X),re=Y({components:{UButton:G},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>g.default.size,validator(e){return Object.keys(ue.size).includes(e)}},to:{type:Function,default:null},activeButton:{type:Object,default:()=>g.default.activeButton},inactiveButton:{type:Object,default:()=>g.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>g.default.firstButton},lastButton:{type:Object,default:()=>g.default.lastButton},prevButton:{type:Object,default:()=>g.default.prevButton},nextButton:{type:Object,default:()=>g.default.nextButton},divider:{type:String,default:"â€¦"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:_}){const{ui:d,attrs:v}=Z("pagination",E(e,"ui"),g,E(e,"class")),n=N({get(){return e.modelValue},set(i){_("update:modelValue",i)}}),p=N(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(i,m)=>m+1)),c=N(()=>{const i=p.value.length,m=n.value,U=Math.max(e.max,5),t=Math.floor((Math.min(U,i)-5)/2),M=m-t,D=m+t,H=M-1>1,T=D+1<i,o=[];if(i<=U){for(let h=1;h<=i;h++)o.push(h);return o}if(o.push(1),H&&o.push(e.divider),!T){const h=m+t+2-i;for(let B=m-t-h;B<=m-t-1;B++)o.push(B)}for(let h=Math.max(2,M);h<=Math.min(i,D);h++)o.push(h);if(!H){const h=1-(m-t-2);for(let B=m+t+1;B<=m+t+h;B++)o.push(B)}return T&&o.push(e.divider),D<i&&o.push(i),o.length>=3&&o[1]===e.divider&&o[2]===3&&(o[1]=2),o.length>=3&&o[o.length-2]===e.divider&&o[o.length-1]===o.length&&(o[o.length-2]=o.length-1),o}),a=N(()=>n.value>1),k=N(()=>n.value<p.value.length);function l(){a.value&&(n.value=1)}function u(){k.value&&(n.value=p.value.length)}function w(i){typeof i!="string"&&(n.value=i)}function $(){a.value&&n.value--}function O(){k.value&&n.value++}return{ui:d,attrs:v,currentPage:n,pages:p,displayedPages:c,canGoLastOrNext:k,canGoFirstOrPrev:a,onClickPrev:$,onClickNext:O,onClickPage:w,onClickFirst:l,onClickLast:u}}});function de(e,_,d,v,n,p){const c=G;return r(),y("div",P({class:e.ui.wrapper},e.attrs),[A(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(r(),z(c,P({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):C("",!0)]),A(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(r(),z(c,P({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):C("",!0)]),(r(!0),y(q,null,K(e.displayedPages,(a,k)=>{var l;return r(),z(c,P({key:`${a}-${k}`,to:typeof a=="number"?(l=e.to)==null?void 0:l.call(e,a):null,size:e.size,disabled:e.disabled,label:`${a}`,ref_for:!0},a===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof a=="string","z-[1]":a===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(a)}),null,16,["to","size","disabled","label","class","onClick"])}),128)),A(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(r(),z(c,P({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):C("",!0)]),A(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(r(),z(c,P({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):C("",!0)])],16)}const ce=R(re,[["render",de]]),pe={};function fe(e,_){const d=x("Vue3Lottie");return r(),y("div",null,[b(d,{height:"350px",animationLink:"https://lottie.host/fb94b96f-1931-4535-b202-b1e5f2f31e60/1RHPTC5KdD.json",size:"250"})])}const me=R(pe,[["render",fe]]),he={key:0},ve={class:"text-2xl font-semibold my-4"},be={class:"flex justify-between mb-3"},ye={class:"flex gap-4"},ge={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},ke={class:"w-full text-sm text-left text-gray-500"},Be=s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"}," Name "),s("th",{scope:"col",class:"px-6 py-3"}," Phone "),s("th",{scope:"col",class:"px-6 py-3"}," Institute "),s("th",{scope:"col",class:"px-6 py-3"}," Batch "),s("th",{scope:"col",class:"px-6 py-3"}," Address "),s("th",null," Action ")])],-1),Ce={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},_e={class:"px-6 py-4"},we={class:"px-6 py-4"},Pe={class:"px-6 py-4"},Ve={class:"px-6 py-4"},ze={key:0},$e={class:"mt-5"},Ne={key:1},Me={__name:"students",setup(e){const{$axios:_}=ne(),d=L(null),v=L(1),n=L(""),p=L(""),c=L(50),a=async()=>{try{const l={};n.value&&(l.search=n.value),c.value&&(l.limit=c.value),v.value&&(l.page=v.value),p.value&&p.value!=="All"&&(l.batch=p.value);const{data:u}=await _.get("/auth/users",{params:l});d.value=u.users}catch(l){console.log(l.message)}};ee([p,c,v],()=>{a()}),te(n,()=>{a()},1e3);const k=async l=>{let u=prompt("Enter password");if(u)try{const{data:w}=await _.post("/auth/admin/signup",{user:l,password:u});ae().add({title:"Admin created successfully"})}catch(w){console.log(w.message)}};return oe(()=>{a()}),(l,u)=>{const w=W,$=J,O=Q,i=G,m=ce,U=me;return f(d)?(r(),y("div",he,[s("h1",ve," Users - Total "+V(f(d).totalDocs)+" Students ",1),s("div",be,[b($,{label:"Search"},{default:S(()=>[b(w,{modelValue:f(n),"onUpdate:modelValue":u[0]||(u[0]=t=>j(n)?n.value=t:null),placeholder:"Search"},null,8,["modelValue"])]),_:1}),s("div",ye,[b($,{label:"Per Page"},{default:S(()=>[b(O,{options:[10,50,100,500,f(d).totalDocs],modelValue:f(c),"onUpdate:modelValue":u[1]||(u[1]=t=>j(c)?c.value=t:null),placeholder:"Per page"},null,8,["options","modelValue"])]),_:1}),b($,{label:"Batch"},{default:S(()=>[b(O,{options:["All",...f(le)],modelValue:f(p),"onUpdate:modelValue":u[2]||(u[2]=t=>j(p)?p.value=t:null),placeholder:"HSC Batch"},null,8,["options","modelValue"])]),_:1})])]),f(d)&&f(d).docs?(r(),y("div",ge,[s("table",ke,[Be,s("tbody",null,[(r(!0),y(q,null,K(f(d).docs,t=>(r(),y("tr",{key:t._id,class:"border-b"},[s("th",Ce,V(t.name),1),s("td",_e,V(t.phone),1),s("td",we,V(t.institute),1),s("td",Pe,V(t.batch),1),s("td",Ve,[t.address||t.district||t.division?(r(),y("div",ze,V(`${t.address} ${t.district} ${t.division}`),1)):C("",!0)]),s("td",null,[l.$userStore.role=="superadmin"?(r(),z(i,{key:0,onClick:M=>k(t._id)},{default:S(()=>[se(" Make Admin ")]),_:2},1032,["onClick"])):C("",!0)])]))),128))])])])):C("",!0),s("div",$e,[b(m,{class:"mx-auto",modelValue:f(v),"onUpdate:modelValue":u[3]||(u[3]=t=>j(v)?v.value=t:null),"page-count":f(d).limit,total:f(d).totalDocs},null,8,["modelValue","page-count","total"])])])):(r(),y("div",Ne,[b(U)]))}}};export{Me as default};

import{_ as I}from"./Bx3FCcoF.js";import{_ as q,r as c,g as D,o,c as a,b as d,w as p,d as h,t as v,h as n,v as E,F as T,m as M,a as m,S as z,n as H,s as g,ar as B,V as Q,T as U,J as V,G as A,j as F}from"./DWcUSBy7.js";const Y=window.setInterval,G={class:"fixed__timer"},J={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(C){const f=C,s=c(0),u=c(0),i=c(0),x=()=>{let r=new Date(f.end_time).getTime(),b=Y(()=>{let e=new Date().getTime(),t=r-e;s.value=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),u.value=Math.floor(t%(1e3*60*60)/(1e3*60)),i.value=Math.floor(t%(1e3*60)/1e3),t<0&&clearInterval(b)},1e3)};D(()=>{x()});const l=r=>r<10?`0${r}`:r;return(r,b)=>{const e=E;return o(),a("div",G,[d(e,{color:"black",size:"lg"},{default:p(()=>[h(v(l(n(s)))+" : "+v(l(n(u)))+" : "+v(l(n(i))),1)]),_:1})])}}},O=q(J,[["__scopeId","data-v-5b7b9e72"]]),X={key:0,class:"max-w-2xl mx-auto pb-10 ns"},K=["innerHTML"],P={class:"flex gap-3 my-2 flex-wrap"},R={class:"mt-3 space-y-2"},W=["onClick"],Z={class:"text-center"},ee={key:1},ne={__name:"questions",setup(C){const{$axios:f}=F(),s=c(null),u=c(!1),i=c(null),x=c(null),l=async()=>{try{if(u.value){g().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3}),B("/");return}const e=s.value.filter(t=>t.selected).map(t=>({q:t._id,a:t.selected}));f.post("/exam/submit",{answers:e}),clearTimeout(x.value),g().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}catch{g().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Something went wrong",life:3e3})}B("/")},r=async()=>{const{data:e}=await f.get("/exam");if(e.not_started){g().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),B("/");return}s.value=e.questions,i.value=e.end_time,u.value=e.participated,x.value=setTimeout(()=>{l()},i.value-new Date().getTime())};D(()=>{r()});const b=(e,t)=>{s.value[e].selected=t};return(e,t)=>{const y=I,L=E,N=Q("Vue3Lottie"),S=O,$=U("katex");return o(),a(T,null,[n(s)?(o(),a("div",X,[(o(!0),a(T,null,M(n(s),(k,_)=>(o(),a("div",{key:_,class:V(["p-5 mx-auto my-3 text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":n(s)[_].selected}])},[m("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:k.question},null,8,K),m("div",P,[d(y,null,{default:p(()=>[h(" Q no. "+v(_+1),1)]),_:2},1024),d(y,{color:"sky"},{default:p(()=>[h(v(k.subject),1)]),_:2},1024),d(y,{color:"orange"},{default:p(()=>[h(" 10 Marks")]),_:1})]),m("div",R,[(o(!0),a(T,null,M(k.options,(w,j)=>(o(),a("div",{key:j,class:V(["flex items-center transition hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":n(s)[_].selected==w._id}]),onClick:te=>b(_,w._id)},[A(m("div",null,null,512),[[$,w.option_text]])],10,W))),128))])],2))),128)),m("div",Z,[d(L,{size:"lg",onClick:l},{default:p(()=>[h(" Submit ")]),_:1})])])):(o(),a("div",ee,[d(N,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),n(s)?(o(),z(S,{key:2,end_time:n(i)},null,8,["end_time"])):H("",!0)],64)}}};export{ne as default};

import{_ as I}from"./DGiefT38.js";import{_ as q,r as d,g as S,o,c as r,b as u,w as v,d as h,t as f,h as n,v as V,ar as z,F as T,m as L,a as p,S as H,n as Q,s as g,as as B,V as U,T as A,J as M,G as F,j as Y}from"./BXJ1dyII.js";const G=window.setInterval,J={class:"fixed__timer"},O={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(C){const x=C,s=d(0),_=d(0),i=d(0),c=()=>{let a=new Date(x.end_time).getTime(),b=G(()=>{let e=new Date().getTime(),t=a-e;s.value=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),_.value=Math.floor(t%(1e3*60*60)/(1e3*60)),i.value=Math.floor(t%(1e3*60)/1e3),t<0&&clearInterval(b)},1e3)};S(()=>{c()});const l=a=>a<10?`0${a}`:a;return(a,b)=>{const e=V;return o(),r("div",J,[u(e,{color:"black",size:"lg"},{default:v(()=>[h(f(l(n(s)))+" : "+f(l(n(_)))+" : "+f(l(n(i))),1)]),_:1})])}}},X=q(O,[["__scopeId","data-v-5b7b9e72"]]),K={key:0,class:"max-w-2xl mx-auto pb-10 ns"},P=["innerHTML"],R={class:"flex gap-3 my-2 flex-wrap"},W={class:"mt-3 space-y-2"},Z=["onClick"],ee={class:"text-center"},te={key:1},ae={__name:"questions",setup(C){const{$axios:x}=Y(),s=d(null),_=d(!1),i=d(null),c=z("timer",null),l=async()=>{try{if(_.value){g().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3}),B("/");return}const e=s.value.filter(t=>t.selected).map(t=>({q:t._id,a:t.selected}));clearTimeout(c.value),x.post("/exam/submit",{answers:e}),c.value=null,g().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}catch{g().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Something went wrong",life:3e3})}B("/")},a=async()=>{const{data:e}=await x.get("/exam");if(c.value&&clearTimeout(c.value),e.not_started){g().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),B("/");return}s.value=e.questions,i.value=e.end_time,_.value=e.participated,c.value=setTimeout(()=>{l()},i.value-new Date().getTime())};S(()=>{a()});const b=(e,t)=>{s.value[e].selected=t};return(e,t)=>{const y=I,D=V,E=U("Vue3Lottie"),N=X,$=A("katex");return o(),r(T,null,[n(s)?(o(),r("div",K,[(o(!0),r(T,null,L(n(s),(k,m)=>(o(),r("div",{key:m,class:M(["p-5 mx-auto my-3 text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":n(s)[m].selected}])},[p("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:k.question},null,8,P),p("div",R,[u(y,null,{default:v(()=>[h(" Q no. "+f(m+1),1)]),_:2},1024),u(y,{color:"sky"},{default:v(()=>[h(f(k.subject),1)]),_:2},1024),u(y,{color:"orange"},{default:v(()=>[h(" 10 Marks")]),_:1})]),p("div",W,[(o(!0),r(T,null,L(k.options,(w,j)=>(o(),r("div",{key:j,class:M(["flex items-center transition hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":n(s)[m].selected==w._id}]),onClick:se=>b(m,w._id)},[F(p("div",null,null,512),[[$,w.option_text]])],10,Z))),128))])],2))),128)),p("div",ee,[u(D,{size:"lg",onClick:l},{default:v(()=>[h(" Submit ")]),_:1})])])):(o(),r("div",te,[u(E,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),n(s)?(o(),H(N,{key:2,end_time:n(i)},null,8,["end_time"])):Q("",!0)],64)}}};export{ae as default};

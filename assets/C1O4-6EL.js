import{_ as q}from"./kvHJ79Uo.js";import{N as z}from"./Dog2zgWk.js";import{o as s,c as r,a as i,t as d,h as o,_ as Y,r as _,g as L,b as l,w as x,d as y,v as M,ar as A,F as N,m as D,S as I,n as U,s as k,as as B,V as F,T as G,J as C,G as J,j as Q}from"./BjQHex1I.js";import{_ as K}from"./Diy2YH73.js";const P={class:"text-center py-3"},R=i("img",{src:q,alt:"logo",class:"mx-auto"},null,-1),W={class:"text-2xl font-semibold"},X=i("h3",null,"Batch 2024",-1),Z={__name:"Watermark",setup(T){return(b,g)=>(s(),r("div",P,[R,i("h1",W,d(o(z)),1),X]))}},ee=window.setInterval,te={class:"fixed__timer"},se={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(T){const b=T,g=_(0),t=_(0),m=_(0),p=()=>{let a=new Date(b.end_time).getTime(),w=ee(()=>{let h=new Date().getTime(),e=a-h;g.value=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),t.value=Math.floor(e%(1e3*60*60)/(1e3*60)),m.value=Math.floor(e%(1e3*60)/1e3),e<0&&clearInterval(w)},1e3)};L(()=>{p()});const n=a=>a<10?`0${a}`:a;return(a,w)=>{const h=M;return s(),r("div",te,[l(h,{color:"black",size:"lg"},{default:x(()=>[y(d(n(o(g)))+" : "+d(n(o(t)))+" : "+d(n(o(m))),1)]),_:1})])}}},oe=Y(se,[["__scopeId","data-v-5b7b9e72"]]),ne={key:0,class:"max-w-2xl mx-auto pb-10 ns"},ae={class:"absolute w-full h-full -z-10 flex items-center justify-center"},ce=["innerHTML"],re={class:"flex gap-3 my-2 flex-wrap"},ie={class:"mt-3 space-y-2"},le=["onClick"],ue={class:"text-center"},de={key:1},ve={__name:"questions",setup(T){const{$axios:b,$userStore:g}=Q(),t=_(null),m=_(!1),p=_(null),n=A("timer",null),a=async()=>{try{if(m.value){k().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3}),B("/");return}const e=t.value.filter(c=>c.selected).map(c=>({q:c._id,a:c.selected}));clearTimeout(n.value),n.value=null,k().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}catch{let c="https://script.google.com/macros/s/AKfycbyk1GskHMYpHLy4zfDXqDw7UHoHC2VBEpauNKxTpuyvuO1EODEML62_lFkmqYGcOwefyA/exec?sheet=1aCnj8xBYF_6IlEUw8E4tR0E7e-G8aakNReOCP1BOlew";const S=t.value.filter(u=>u.selected).map(u=>({q:u._id,a:u.selected})),f={roll:$userSore.user._id,name:$userSore.user.name,attempt:1,score:0,college:$userSore.user.institute,duration:new Date().toLocaleString(),submission:JSON.stringify(S)};fetch(c,{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify(f)}),k().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}B("/")},w=async()=>{const{data:e}=await b.get("/exam");if(n.value&&clearTimeout(n.value),e.not_started){k().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),B("/");return}t.value=e.questions,p.value=e.end_time,m.value=e.participated,n.value=setTimeout(()=>{a()},p.value-new Date().getTime())};L(()=>{w()});const h=(e,c)=>{t.value[e].selected=c};return(e,c)=>{const S=Z,f=K,u=M,O=F("Vue3Lottie"),V=oe,H=G("katex");return s(),r(N,null,[o(t)?(s(),r("div",ne,[(s(!0),r(N,null,D(o(t),($,v)=>(s(),r("div",{key:v,class:C(["p-5 mx-auto my-3 relative text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":o(t)[v].selected}])},[i("div",ae,[l(S,{class:"opacity-10 top-0 max-w-md"})]),i("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:$.question},null,8,ce),i("div",re,[l(f,null,{default:x(()=>[y(" Q no. "+d(v+1),1)]),_:2},1024),l(f,{color:"sky"},{default:x(()=>[y(d($.subject),1)]),_:2},1024),l(f,{color:"orange"},{default:x(()=>[y(" 10 Marks")]),_:1})]),i("div",ie,[(s(!0),r(N,null,D($.options,(E,j)=>(s(),r("div",{key:j,class:C(["flex items-center transition z-10 hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":o(t)[v].selected==E._id}]),onClick:_e=>h(v,E._id)},[J(i("div",null,null,512),[[H,E.option_text]])],10,le))),128))])],2))),128)),i("div",ue,[l(u,{size:"lg",onClick:a},{default:x(()=>[y(" Submit ")]),_:1})])])):(s(),r("div",de,[l(O,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),o(t)?(s(),I(V,{key:2,end_time:o(p)},null,8,["end_time"])):U("",!0)],64)}}};export{ve as default};

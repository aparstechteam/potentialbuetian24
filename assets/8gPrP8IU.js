import{_ as E}from"./Dtpmrugc.js";import{_ as $,r as u,g as C,o,c as i,b as d,w as h,d as f,t as g,h as n,R as D,N as T,O as N,a as v,M as j,D as O,Q as B,ar as Q,V as z,S as H,B as M,y as U,j as A}from"./CmQZKXSU.js";const J=window.setInterval,F={class:"fixed__timer"},R={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(S){const x=S,s=u(0),l=u(0),_=u(0),b=()=>{let a=new Date(x.end_time).getTime(),k=J(()=>{let e=new Date().getTime(),t=a-e;s.value=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),l.value=Math.floor(t%(1e3*60*60)/(1e3*60)),_.value=Math.floor(t%(1e3*60)/1e3),t<0&&clearInterval(k)},1e3)};C(()=>{b()});const m=a=>a<10?`0${a}`:a;return(a,k)=>{const e=D;return o(),i("div",F,[d(e,{color:"black",size:"lg"},{default:h(()=>[f(g(m(n(s)))+" : "+g(m(n(l)))+" : "+g(m(n(_))),1)]),_:1})])}}},X=$(R,[["__scopeId","data-v-5b7b9e72"]]),Y={key:0,class:"max-w-2xl mx-auto pb-10 ns"},G=["innerHTML"],K={class:"flex gap-3 my-2"},P={class:"mt-3 space-y-2"},W=["onClick"],Z={class:"text-center"},ee={key:1},ne={__name:"questions",setup(S){const{$axios:x}=A(),s=u(null),l=u(null),_=u(null),b=async()=>{try{const e=s.value.filter(t=>t.selected).map(t=>({q:t._id,a:t.selected}));x.post("/exam/submit",{answers:e}),clearTimeout(_.value),B().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}catch{B().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Something went wrong",life:3e3})}Q("/")},m=async()=>{const{data:e}=await x.get("/exam");s.value=e.questions,l.value=e.end_time,k(),_.value=setTimeout(()=>{b()},l.value-new Date().getTime())};C(()=>{m()});const a=(e,t)=>{s.value[e].selected=t;let r=s.value.filter(c=>c.selected).map(c=>({q:c._id,a:c.selected}));localStorage.setItem("answers",JSON.stringify(r))},k=()=>{let e=JSON.parse(localStorage.getItem("answers"));e&&e.length>0&&e.forEach(t=>{let r=s.value.findIndex(c=>c._id==t.q);r!=-1&&(s.value[r].selected=t.a)})};return(e,t)=>{const r=E,c=D,I=z("Vue3Lottie"),L=X,V=H("katex");return o(),i(T,null,[n(s)?(o(),i("div",Y,[(o(!0),i(T,null,N(n(s),(w,p)=>(o(),i("div",{key:p,class:M(["p-5 mx-auto my-3 text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":n(s)[p].selected}])},[v("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:w.question},null,8,G),v("div",K,[d(r,null,{default:h(()=>[f(" Q no. "+g(p+1),1)]),_:2},1024),d(r,{color:"sky"},{default:h(()=>[f(g(w.subject),1)]),_:2},1024),d(r,{color:"orange"},{default:h(()=>[f(" 10 Marks")]),_:1})]),v("div",P,[(o(!0),i(T,null,N(w.options,(y,q)=>(o(),i("div",{key:q,class:M(["flex items-center transition hover:scale-105 duration-200 hover:bg-green-100 cursor-pointer p-2 border rounded-md",{"bg-green-100 border-2 border-green-500":n(s)[p].selected==y._id}]),onClick:te=>a(p,y._id)},[U(v("div",null,null,512),[[V,y.option_text]])],10,W))),128))])],2))),128)),v("div",Z,[d(c,{size:"lg",onClick:b},{default:h(()=>[f(" Submit ")]),_:1})])])):(o(),i("div",ee,[d(I,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),n(s)?(o(),j(L,{key:2,end_time:n(l)},null,8,["end_time"])):O("",!0)],64)}}};export{ne as default};

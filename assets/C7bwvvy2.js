import{_ as D}from"./wcfGsfro.js";import{_ as U}from"./BBjete9O.js";import{r as m,k as B,l as C,g as N,h as o,o as d,c as _,a as t,t as a,b as c,w as x,F as M,m as P,n as R,q as y,s as H,v as F,d as j,j as q}from"./BjQHex1I.js";import{_ as E}from"./BZXJeF7z.js";import{_ as I}from"./DYG3By1T.js";import{_ as L}from"./BUGXSCoY.js";import{m as G,f as v}from"./C9nKdLWe.js";import{H as $}from"./Dog2zgWk.js";import"./Ccd6eZ7J.js";import"./Dq_1TCg5.js";const z={key:0},J={class:"text-2xl font-semibold my-4"},K={class:"flex justify-between mb-3"},O={class:"flex gap-4 items-end"},Q={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},W={class:"w-full text-sm text-left text-gray-500"},X=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Name "),t("th",{scope:"col",class:"px-6 py-3"}," Phone "),t("th",{scope:"col",class:"px-6 py-3"}," Institute "),t("th",{scope:"col",class:"px-6 py-3"}," Batch "),t("th",{scope:"col",class:"px-6 py-3"}," Duration "),t("th",{scope:"col",class:"px-6 py-3"}," Score "),t("th",{scope:"col",class:"px-6 py-3"}," Status "),t("th",{scope:"col",class:"px-6 py-3"}," Submitted At "),t("th",{scope:"col",class:"px-6 py-3"}," Started At "),t("th",{scope:"col",class:"px-6 py-3"}," Registeted At ")])],-1),Y={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},Z={class:"px-6 py-4"},tt={class:"px-6 py-4"},et={class:"px-6 py-4"},st={class:"px-6 py-4"},ot={class:"px-6 py-4"},at={class:"px-6 py-4"},lt={class:"px-6 py-4"},nt={class:"px-6 py-4"},ct={class:"px-6 py-4"},it={class:"mt-5"},ut={key:1},bt={__name:"leaderboard",setup(pt){const{$axios:b}=q(),h=m(!1),n=m(null),u=m(1),p=m(""),i=m(""),r=m(50),f=async()=>{try{const s={};p.value&&(s.search=p.value),r.value&&(s.limit=r.value),u.value&&(s.page=u.value),i.value&&i.value!=="All"&&(s.batch=i.value);const{data:l}=await b.get("/exam/submissions",{params:s});n.value=l}catch(s){console.log(s.message)}},V=async()=>{try{h.value=!0;const{status:s}=await b.post("/exam/calculate");s===200&&(H().add({title:"Marks calculated"}),h.value=!1,f())}catch(s){console.log(s.message),h.value=!1}};return B([i,r,u],()=>{f()}),C(p,()=>{f()},1e3),N(()=>{f()}),(s,l)=>{const S=D,g=U,w=F,T=E,k=I,A=L;return o(n)?(d(),_("div",z,[t("h1",J," Submissions - Total "+a(o(n).totalResults)+" Students ",1),t("div",K,[c(g,{label:"Search"},{default:x(()=>[c(S,{modelValue:o(p),"onUpdate:modelValue":l[0]||(l[0]=e=>y(p)?p.value=e:null),placeholder:"Search"},null,8,["modelValue"])]),_:1}),t("div",O,[t("div",null,[c(w,{onClick:V,loading:o(h)},{default:x(()=>[j(" Calculate Marks ")]),_:1},8,["loading"])]),c(g,{label:"Per Page"},{default:x(()=>[c(T,{options:[10,50,100,500,o(n).totalResults],modelValue:o(r),"onUpdate:modelValue":l[1]||(l[1]=e=>y(r)?r.value=e:null),placeholder:"Per page"},null,8,["options","modelValue"])]),_:1}),c(g,{label:"Batch"},{default:x(()=>[c(T,{options:["All",...o($)],modelValue:o(i),"onUpdate:modelValue":l[2]||(l[2]=e=>y(i)?i.value=e:null),placeholder:"HSC Batch"},null,8,["options","modelValue"])]),_:1})])]),o(n)&&o(n).submissions?(d(),_("div",Q,[t("table",W,[X,t("tbody",null,[(d(!0),_(M,null,P(o(n).submissions,e=>(d(),_("tr",{key:e.user._id,class:"border-b"},[t("th",Y,a(e.user.name),1),t("td",Z,a(e.user.phone),1),t("td",tt,a(e.user.institute),1),t("td",et,a(e.user.batch),1),t("td",st,a(e.duration?("millisecToTime"in s?s.millisecToTime:o(G))(e.duration):""),1),t("td",ot,a(e.marks),1),t("td",at,a(e.status),1),t("td",lt,a(e.submittedAt?("formatDateTime"in s?s.formatDateTime:o(v))(e.submittedAt):""),1),t("td",nt,a(("formatDateTime"in s?s.formatDateTime:o(v))(e.createdAt)),1),t("td",ct,a(("formatDateTime"in s?s.formatDateTime:o(v))(e.user.createdAt)),1)]))),128))])])])):R("",!0),t("div",it,[c(k,{class:"mx-auto",modelValue:o(u),"onUpdate:modelValue":l[3]||(l[3]=e=>y(u)?u.value=e:null),"page-count":o(n).limit,total:o(n).totalResults},null,8,["modelValue","page-count","total"])])])):(d(),_("div",ut,[c(A)]))}}};export{bt as default};
